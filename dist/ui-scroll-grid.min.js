/*!
 * angular-ui-scroll
 * https://github.com/angular-ui/ui-scroll.git
 * Version: 1.5.2 -- 2016-12-15T00:49:38.845Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.scroll.grid",[]).directive("uiScrollTh",["$log","$timeout",function(a,b){function c(a){this.getLayout=function(){return a.getLayout()},this.applyLayout=function(b){return a.applyLayout(b)},this.columnFromPoint=function(b,c){return a.columnFromPoint(b,c)},Object.defineProperty(this,"columns",{get:function(){return a.getColumns()}})}function d(a,b){this.css=function(){var c=arguments[0],d=arguments[1];return 1==arguments.length?b.header.css(c):void(2==arguments.length&&(b.header.css(c,d),a.forEachRow(function(a){return a[b.id].css(c,d)}),b.css[c]=d))},this.moveBefore=function(c){a.moveBefore(b,c)},this.exchangeWith=function(c){a.exchangeWith(b,c)},Object.defineProperty(this,"columnId",{get:function(){return b.id}})}function e(a,b,c){function d(a,b,c){var d=a.offset();return b<d.left||d.left+a.outerWidth(!0)<b?!1:!(c<d.top||d.top+a.outerHeight(!0)<c)}function e(a,b){a.detach(),b.before(a)}function f(a,b){var c=a.parent();a.detach(),c.append(a)}function g(a,b){a.removeAttr("style");for(var c in b)b.hasOwnProperty(c)&&a.css(c,b[c])}this.header=c,this.cells=[],this.css={},this.mapTo=b.length,this.id=b.length,this.applyLayout=function(a){this.css=angular.extend({},a.css),this.mapTo=a.mapTo,g(this.header,this.css)},this.moveBefore=function(b){var d=this;b?(e(c,b.header),a.forEachRow(function(a){return e(a[d.id],a[b.id])})):(f(c),a.forEachRow(function(a){return f(a[d.id])}))},this.columnFromPoint=function(b,e){var f=this;if(d(c,b,e))return this;var g=void 0;return a.forEachRow(function(a){d(a[f.id],b,e)&&(g=f)}),g},this.applyCss=function(a){g(a,this.css)}}function f(a,f){function g(a){var b=a[0].parent(),c=[];a.forEach(function(b,d){i[d].applyCss(b),c[i[d].mapTo]=a[d],a[d].detach()}),c.forEach(function(a){return b.append(a)})}var h=this,i=[],j=new Map;b(function(){f.adapter.gridAdapter=new c(h),f.adapter.transform=function(a,b){return g(j.get(a),b)}}),this.registerColumn=function(a){i.push(new e(this,i,a))},this.registerCell=function(a,b){var c=j.get(a);return c||(c=[],j.set(a,c)),c.length>=i.length?!1:(c.push(b),!0)},this.unregisterCell=function(a,b){var c=j.get(a),d=c.indexOf(b);c.splice(d,1),c.length||j["delete"](a)},this.forEachRow=function(a){j.forEach(a)},this.getColumns=function(){var a=this,b=[];return i.slice().sort(function(a,b){return a.mapTo-b.mapTo}).forEach(function(c){return b.push(new d(a,c))}),b},this.getLayout=function(){var a=[];return i.forEach(function(b,c){return a.push({index:c,css:angular.extend({},b.css),mapTo:b.mapTo})}),a},this.applyLayout=function(a){if(!a||a.length!=i.length)throw new Error("Failed to apply layout - number of layouts should match number of columns");a.forEach(function(a,b){i[b].applyLayout(a)}),g(i.map(function(a){return a.header})),j.forEach(function(a){g(a)})},this.moveBefore=function(a,b){var c=b;if(b%1!==0&&(c=b?i[b.columnId].mapTo:i.length),!(0>c||c>i.length)){var d=a.mapTo,e=void 0;c-=c>d?1:0,i.forEach(function(a){a.mapTo-=a.mapTo>d?1:0,a.mapTo+=a.mapTo>=c?1:0,e=a.mapTo===c+1?a:e}),a.mapTo=c,a.moveBefore(e)}},this.exchangeWith=function(a,b){0>b||b>=i.length||(i.find(function(a){return a.mapTo===b}).mapTo=a.mapTo,a.mapTo=b)},this.columnFromPoint=function(a,b){for(var c=0;c<i.length;c++){var e=i[c].columnFromPoint(a,b);if(e)break}return e?new d(this,e):void 0}}return{require:["^^uiScrollViewport"],restrict:"A",link:function(a,b,c,d,e){d[0].gridController=d[0].gridController||new f(a,d[0]),d[0].gridController.registerColumn(b)}}}]).directive("uiScrollTd",["$log",function(a){return{require:["?^^uiScrollViewport"],restrict:"A",link:function(a,b,c,d,e){d[0]&&!function(){var c=d[0].gridController;c.registerCell(a,b)&&a.$on("$destroy",function(){return c.unregisterCell(a,b)})}()}}}])}();